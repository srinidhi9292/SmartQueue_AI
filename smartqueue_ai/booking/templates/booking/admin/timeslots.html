{% extends 'booking/base.html' %}
{% block title %}Time Slots{% endblock %}
{% block extra_css %}<style>
.admin-layout{display:flex;min-height:calc(100vh - 67px)}.main-content{flex:1;padding:36px}
.main-content h1,.main-content h2,.main-content h3,.main-content h4,.main-content h5,.main-content h6 { color:#e8eeff !important; }
.card h6,.card h5,.card h4 { color:#e8eeff !important; }
.table td { color:#e8eeff !important; }
.table th,.table-light th { color:#8fa8cc !important; }
.table-light { background:rgba(15,22,41,0.7) !important; }
.btn-outline-primary { color:#5b8fff !important; }
.btn-outline-danger  { color:#ff4d6d !important; }
</style>{% endblock %}
{% block content %}
<div class="admin-layout" style="position:relative;z-index:1">
<div class="admin-sidebar">
    <div class="px-4 mb-4"><div style="font-size:.7rem;text-transform:uppercase;letter-spacing:2px;color:var(--muted)">Admin Panel</div></div>
    <nav class="nav flex-column gap-1">
        <a class="nav-link" href="{% url 'admin_dashboard' %}"><i class="bi bi-speedometer2"></i>Dashboard</a>
        <a class="nav-link" href="{% url 'admin_appointments' %}"><i class="bi bi-calendar-check"></i>Appointments</a>
        <a class="nav-link" href="{% url 'admin_services' %}"><i class="bi bi-grid-3x3-gap"></i>Services</a>
        <a class="nav-link active" href="{% url 'admin_timeslots' %}"><i class="bi bi-clock"></i>Time Slots</a>
        <a class="nav-link" href="{% url 'admin_blocked_dates' %}"><i class="bi bi-calendar-x"></i>Blocked Dates</a>
        <a class="nav-link" href="{% url 'admin_analytics' %}"><i class="bi bi-graph-up"></i>Analytics</a>
        <div style="height:1px;background:var(--border);margin:12px 16px"></div>
        <a class="nav-link" href="{% url 'home' %}"><i class="bi bi-house"></i>Public Site</a>
    </nav>
</div>
<div class="main-content">
    <div class="d-flex justify-content-between align-items-center mb-5">
        <div>
            <span class="section-label mb-2 d-inline-flex">Schedule</span>
            <h3 style="font-family:'Syne',sans-serif;font-weight:800;margin:0">Time Slots</h3>
        </div>
        <a href="{% url 'admin_timeslot_add' %}" class="btn btn-primary px-4" style="border-radius:50px"><i class="bi bi-plus-lg me-2"></i>Add Slot</a>
    </div>
    <div class="card">
        <div style="position:absolute;top:0;left:0;right:0;height:2px;background:linear-gradient(90deg,var(--cyan),var(--primary));border-radius:20px 20px 0 0"></div>
        <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
                <thead class="table-light"><tr><th>Date</th><th>Start</th><th>End</th><th>Capacity</th><th>Booked</th><th>Status</th><th>Actions</th></tr></thead>
                <tbody>
                    {% for slot in timeslots %}
                    {% with status=slot.slot_status bc=slot.booking_count %}
                    <tr>
                        <td style="font-weight:600">{{ slot.date|date:"D, d M Y" }}</td>
                        <td style="color:var(--muted)">{{ slot.start_time|time:"g:i A" }}</td>
                        <td style="color:var(--muted)">{{ slot.end_time|time:"g:i A" }}</td>
                        <td>{{ slot.capacity }}</td>
                        <td>{{ bc }}</td>
                        <td>
                            <span class="badge rounded-pill px-3 {% if status == 'available' %}badge-approved{% elif status == 'almost_full' %}badge-pending{% else %}badge-cancelled{% endif %}">
                                {% if status == 'available' %}Available{% elif status == 'almost_full' %}Almost Full{% else %}Full{% endif %}
                            </span>
                        </td>
                        <td>
                            <a href="{% url 'admin_timeslot_edit' slot.pk %}" class="btn btn-outline-primary btn-sm me-1" style="border-radius:8px">Edit</a>
                            <a href="{% url 'admin_timeslot_delete' slot.pk %}" class="btn btn-outline-danger btn-sm" style="border-radius:8px">Delete</a>
                        </td>
                    </tr>
                    {% endwith %}
                    {% empty %}<tr><td colspan="7" class="text-center py-5" style="color:var(--muted)">No upcoming slots.</td></tr>{% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
</div>
{% endblock %}
